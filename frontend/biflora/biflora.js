!function n(i,t,r){function e(a,c){if(!t[a]){if(!i[a]){var u="function"==typeof require&&require;if(!c&&u)return u(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+a+"'")}var f=t[a]={exports:{}};i[a][0].call(f.exports,function(n){var t=i[a][1][n];return e(t?t:n)},f,f.exports,n,i,t,r)}return t[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)e(r[a]);return e}({1:[function(n,i,t){i.exports=new function(){function n(){return"uuid-"+((new Date).getTime().toString(16)+Math.floor(1e7*Math.random()).toString(16))}var i={};this.addNewTimer=function(t){var r=n();"string"==typeof t&&(r=t);for(;;)if(!i[r])return i[r]=setTimeout(function(){console.error(r+": 1000msec 待っても返信が得られませんでした。")},1e3),r;return!1},this.clearTimer=function(n){if(i[n]){var t=i[n];return clearTimeout(i[n]),i[n]=null,delete i[n],t}return!1}}},{}],2:[function(n,i,t){i.exports=new function(){function n(){return"uuid-"+((new Date).getTime().toString(16)+Math.floor(1e7*Math.random()).toString(16))}var i={};this.addNewFunction=function(t){if("function"!=typeof t)return!1;for(var r=0;;)if(r=n(),!i["fnc-"+r])return i["fnc-"+r]=t,"fnc-"+r;return!1},this.getCallbackFunction=function(n){if(i[n]){var t=i[n];return i[n]=null,delete i[n],t}return!1},this.callRemoteFunction=function(n,i,t){n.send(i,t)}}},{}],3:[function(n,i,t){window.biflora=function(){var i=function(){};return i.prototype.createSocket=function(i,t,r,e){e=e||{};var o=e.server||window.location.origin;return new function(i,t,r,e){var o=this;this.main=i,this.apis=e,this.temporaryApis=n("../../lib/temporaryApis.js"),this.pingApi=n("../../lib/pingApi.js"),o.socket=t.connect(r),this.send=function(n,i,t){var r={api:n,data:i,callback:o.temporaryApis.addNewFunction(t)};return r.pingName=o.pingApi.addNewTimer(r.callback),o.socket.emit("biflora-command",JSON.stringify(r)),this},this.joinRoom=function(n,i,t){var r={room:n,join:i,callback:o.temporaryApis.addNewFunction(t)};return r.pingName=o.pingApi.addNewTimer(r.callback),this.socket.emit("biflora-joinRoom",JSON.stringify(r)),this},o.socket.on("biflora-command",function(n){try{n=JSON.parse(n)}catch(i){}n=n||{},n.api=n.api||"",n.callback=n.callback||null,n.pingName=n.pingName||null,o.socket.emit("biflora-pingAnswerCall",n.pingName);var t=o.temporaryApis.getCallbackFunction(n.api),r=n.callback;!t&&o.apis[n.api]&&(t=o.apis[n.api]),t&&t(n.data,function(n){o.temporaryApis.callRemoteFunction(o,r,n)},o.main,o)}),o.socket.on("biflora-pingAnswerCall",function(n){o.pingApi.clearTimer(n)})}(i,t,o,r)},new i}()},{"../../lib/pingApi.js":1,"../../lib/temporaryApis.js":2}]},{},[3]);